---
title: "Prueba 2 - Informe"
subtitle: "Introducción a Ciencia de Datos - UCAB Abril 2022"
author: 
  - Ana Gabriela Ibarra
  - Ana Leticia Ibarra
date: "`r Sys.Date()`"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

```{r, include=FALSE}
library(tidyverse)
library(readxl)
library(ggplot2)
library(ggthemes)
```

## Introducción
Es conocido que el análisis de datos es una herramienta crucial para el proceso de toma de decisiones, estas decisiones no se limitan al ámbito empresarial o __, sino también se podrían extender a áreas de la salud. 

Un área de la salud que consideramos importante analizar es la salud sexual y reproductiva _ objetivo informar los esfuerzos hacia la equidad global en este tema. 
 
Los conjuntos de datos que procesaremos están orientados a monitorear y medir las tendencias en embarazos no deseador y abortos.

## Objetivo
Realizar un análisis exploratorio de datos mediante el procesamiento y visualización de los mismos. 

## Fuentes de datos
En esta ocasión estaremos usando 3 fuentes de datos diferentes que se relacionan entre sí, a continuación las listaremos y las describiremos brevemente:

* Tasa de abortos
  * Descripción
  * Cantidad de observaciones
  * Cantidad de variables
  * Valores faltantes
  

```{r}
getwd()

dirty_abrate <- read_excel("datasets/ds-abrate.xlsx")
```


* Embarazos deseados vs. no deseados
  * Descripción
  * Cantidad de observaciones
  * Cantidad de variables
  * Valores faltantes

```{r}
dirty_wntdprg <- read_excel("datasets/ds-wntdprg.xlsx")
```

* Regiones
  * Descripción
  * Cantidad de observaciones
  * Cantidad de variables
  * Valores faltantes

```{r}
regions <- read.csv("datasets/all.csv")

# Renombramos la columna de nombre a Country
names(regions)[names(regions) == 'name'] <- 'Country'
```

## Limpieza de datos
Uno de los retos que encontramos al hacer la limpieza de los datos fue intentar agrupar los datos por regiones. 

## Base de datos a utilizar

```{r}
ab_data <- read.csv("datasets/ab_data.csv")
preg_data <- read.csv("datasets/preg_data.csv")
regions <- read.csv("datasets/regions.csv")

```

## Visualización de datos

```{r, echo=FALSE}
preg_data %>% 
  select(Country, region, perc_rural_w_nwap, perc_rural_w_wap) %>% 
  group_by(region) %>% 
  summarise(perc_rural_reg = mean(perc_rural_w_wap)) %>% 
  ggplot( aes(x = region, y= perc_rural_reg,fill=region)) + 
  geom_bar(stat='identity') +
  labs(title="Porcentaje de embarazos deseados por región en áreas rurales", 
       x = "Región", y ="Porcentaje de embarazos") +
  theme_minimal() +
  theme(legend.position = "none")
```

```{r, echo=FALSE}

ss <- preg_data %>% 
  select(Country, region, perc_urban_w_nwap, perc_rural_w_nwap)  %>% 
  pivot_longer(cols = c("perc_urban_w_nwap", "perc_rural_w_nwap"),
               names_to = "series" ,
               values_to = "value")  


p <- ss %>% 
  mutate(region = reorder(region, value, FUN = median)) %>%
  ggplot() +
  theme(axis.text.x = element_text(angle = 90, hjust = 1)) +
  xlab("") +
  scale_y_continuous(trans = "log2")  



# Evita el facet_grid y colorea por ano
p + geom_boxplot(aes(region, value, fill = factor(series)))
```

## Conclusiones
Tanto el embarazo no planificado como el aborto son experiencias compartidas por las mujeres a nivel mundial, sin importar el área de donde provengan o habiten o la región. Esto es algo que ocurre y seguirá ocurriendo y es importante que se tenga en cuenta para la toma de decisiones a nivel de derechos reproductivos. Se necesitan medidas que aseguren las vidas de las mujeres que se someten a estos procedimientos. 

https://www.guttmacher.org/es/fact-sheet/aborto-inducido-nivel-mundial

Parte I
Parte II 

En el marco de la derogación??? de Roe v. Wade en los Estados Unidos, decidimos tomar este tema para estudiar el __ de las mujeres que se __ a abortos en el mundo. 
Es algo que sucede y seguirá sucediendo. 

La primera parte del informe debe ser una descripción básica de los datos que utilizan. Fuente, conceptos pertinentes, definiciones de indicadores, cantidad de observaciones, cantidad de variables, valores faltantes.

*Si deben realizar algún cálculo adicional a los datos que importaron, deben describir el cálculo realizado y hacer referencia a la fuente en la que se basaron.

Nota: el objetivo de esta parte es contextualizar al “lector” por lo que no deben extenderse mucho, pero sí es importante asegurarse de que se explica todo lo necesario para entender el resto del informe.

This is an R Markdown document. Markdown is a simple formatting syntax for authoring HTML, PDF, and MS Word documents. For more details on using R Markdown see <http://rmarkdown.rstudio.com>.

When you click the **Knit** button a document will be generated that includes both content as well as the output of any embedded R code chunks within the document. You can embed an R code chunk like this:

```{r cars}
summary(cars)
```

## Including Plots

You can also embed plots, for example:

```{r pressure, echo=FALSE}
plot(pressure)
```

Note that the `echo = FALSE` parameter was added to the code chunk to prevent printing of the R code that generated the plot.
